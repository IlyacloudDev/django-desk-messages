{% extends 'default.html' %}

{% load custom_tags %}

{% block title %}
Announcements
{% endblock title %}

{% block content %}
    <p></p>
    <h1 style="text-align: left;">
        Offers
    </h1>
    <p></p>
    <hr/>
    {% if announcements %}
        {% for announcement in announcements %}
        <div align="left" style="background-color: #F0FFF0">
            <h2>
                <a href="{% url 'announcement_detail' pk=announcement.id %}" style="color: #000000">"{{ announcement.title }}":</a>
            </h2>
            <h3>
                {{announcement.announcement_text|safe }}
            </h3>
            <h6 style="text-align: left;">
                Date: {{ announcement.time_in|date:'d M Y' }} <span style='padding-left:300px;'> author: @{{ announcement.author }} </span>
            </h6>
        </div>
        <p></p>
        {% endfor %}
    {% else %}
        <h3>No announcements</h3>
    {% endif %}

    {# Добавляем пагинацию на страницу #}

    {% if page_obj.has_previous %}
        {# Для каждой ссылки пагинации указываем обработку через новый тег #}
        <a href="?{% url_replace page=1 %}">1</a>
        {% if page_obj.previous_page_number != 1 %}
            ...
            <a href="?{% url_replace page=page_obj.previous_page_number %}">{{ page_obj.previous_page_number }}</a>
        {% endif %}
    {% endif %}

    {{ page_obj.number }}

    {% if page_obj.has_next %}
        <a href="?{% url_replace page=page_obj.next_page_number %}">{{ page_obj.next_page_number }}</a>
        {% if paginator.num_pages != page_obj.next_page_number %}
            ...
            <a href="?{% url_replace page=page_obj.paginator.num_pages %}">{{ page_obj.paginator.num_pages }}</a>
        {% endif %}
    {% endif %}

{% endblock content %}